<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>AR Oso Bailando Sin Marcador</title>
    <!-- MindAR -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.0/dist/mindar-image.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.136.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.136.0/examples/js/loaders/GLTFLoader.js"></script>
  </head>
  <body style="margin: 0;">
    <div id="ar-container" style="width: 100%; height: 100vh;"></div>

    <script>
      // Inicializar MindAR (SLAM)
      const mindarThree = new window.MINDAR.IMAGE.MindARThree({
        container: document.getElementById("ar-container"),
        maxTrack: 1, // Máximo de objetos rastreados
      });

      // Escena 3D
      const { scene, camera, renderer } = mindarThree;

      // Cargar modelo 3D
      const loader = new THREE.GLTFLoader();
      loader.load(
        "oso-bailando.glb", // Asegúrate de que la ruta sea correcta
        (gltf) => {
          const model = gltf.scene;
          model.scale.set(1, 1, 1);
          model.rotation.y = Math.PI; // 90 grados en radianes

          // Animación
          const mixer = new THREE.AnimationMixer(model);
          const action = mixer.clipAction(gltf.animations[0]);
          action.play();

          // Actualizar animación
          mindarThree.update = (delta) => {
            mixer.update(delta);
          };

          scene.add(model);
        }
      );

      // Iniciar AR
      mindarThree.start();
    </script>
  </body>
</html>
